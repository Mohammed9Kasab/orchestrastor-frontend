<div>
  <div class="d-flex justify-content-center">
    <div class="col-md-4">
      <div class="alert alert-danger" *ngIf="initialized && !key">
        <strong>The password reset key is missing.</strong>
      </div>

      <div class="alert alert-danger" *ngIf="error">
        <span>Hey there is a problem. Please try again!</span>
      </div>
      <div class="alert alert-success" *ngIf="success">
        <span><strong>Your password has been reset.</strong> Please </span>
        <a class="alert-link" routerLink="/auth/sign-in">Sign in</a>.
      </div>

      <div class="alert alert-danger" *ngIf="doNotMatch">
        The password and its confirmation do not match!
      </div>

      <div class="alert alert-danger" *ngIf="inputsFilledError">
        <strong>Please fill all fields!</strong>
      </div>

      <div class="auth-wrapper d-flex no-block justify-content-center align-items-center">
        <div class="auth-box m-3 m-md-0 card" *ngIf="!success">
          <div>
            <div class="text-center">
              <h5 class="font-medium mb-4">Reset your password</h5>
            </div>
            <div class="row">
              <div class="col-12">
                <form class="form-horizontal mt-3" name="form" role="form" [formGroup]="passwordForm" (ngSubmit)="finishReset()"
                      *ngIf="!success">
                  <div class="mb-3 row">
                    <div class="col-12">
                      <label class="form-label" for="newPassword">New password</label>
                      <input
                        type="password"
                        class="form-control"
                        id="newPassword"
                        name="newPassword"
                        formControlName="newPassword"
                        data-cy="resetPassword"
                        #newPassword
                      />
                      <div
                        *ngIf="passwordForm.get('newPassword')!.invalid &&
                              (passwordForm.get('newPassword')!.dirty || passwordForm.get('newPassword')!.touched)"
                      >
                        <small
                          class="form-text text-danger"
                          *ngIf="passwordForm.get('newPassword')?.errors?.required"
                        >
                          Your password is required.
                        </small>

                        <small
                          class="form-text text-danger"
                          *ngIf="passwordForm.get('newPassword')?.errors?.minlength"
                        >
                          Your password is required to be at least 4 characters.
                        </small>

                        <small
                          class="form-text text-danger"
                          *ngIf="passwordForm.get('newPassword')?.errors?.maxlength"
                        >
                          Your password cannot be longer than 50 characters.
                        </small>
                      </div>
                    </div>

                      <div class="col-12 mb-3">
                      <label class="form-label" for="confirmPassword">New password confirmation</label>
                      <input
                        type="password"
                        class="form-control"
                        id="confirmPassword"
                        name="confirmPassword"
                        formControlName="confirmPassword"
                        data-cy="confirmResetPassword"
                      />

                      <div
                        *ngIf="passwordForm.get('confirmPassword')!.invalid &&
                              (passwordForm.get('confirmPassword')!.dirty || passwordForm.get('confirmPassword')!.touched)
              "
                      >
                        <small
                          class="form-text text-danger"
                          *ngIf="passwordForm.get('confirmPassword')?.errors?.required"
                        >
                          Your password confirmation is required.
                        </small>

                        <small
                          class="form-text text-danger"
                          *ngIf="passwordForm.get('confirmPassword')?.errors?.minlength"
                        >
                          Your password confirmation is required to be at least 4 characters.
                        </small>

                        <small
                          class="form-text text-danger"
                          *ngIf="passwordForm.get('confirmPassword')?.errors?.maxlength"
                        >
                          Your password confirmation cannot be longer than 50 characters.
                        </small>
                      </div>
                    </div>

                    <button
                      type="submit"
                      [disabled]="passwordForm.invalid"
                      class="btn d-block w-70 m-auto btn-lg btn-info"
                      style="background-color: #262b5a; border-color: #262b5a"
                      data-cy="submit"
                    >
                      Validate New Password
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
